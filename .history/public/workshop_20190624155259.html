<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Redux - VanillaJS</title>
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>
  <body>
    <h1 id="title">Redux Workshop</h1>
    <select id="filter-selector">
        <option value="SHOW_ALL">Show all</option>
        <option value="SHOW_TODO">Show todo</option>
        <option value="SHOW_DONE">Show done</option>
    </select>

<script>
    //create Element Title
    const selectElem = document.querySelector('#filter-selector');
    const titleElem = document.querySelector('#title');

    //create init(default) state
    const initState = {
        title: 'Missing the title'
    }

    //create action
    const actionTitle = {
        type: 'CHANGE_TITLE',
        newTitle: ''
    }

    //create reducer
    const reducer = (state = initState, action) => {
        switch (action.type) {
            case 'CHANGE_TITLE':
                return {
                    ...state,
                    title: action.newTitle
                }
                
            default:
                return state;
        }
    }

    //create store
    const {createStore } = Redux;
    const store = createStore(reducer);
    
    //console.log() in case Updating Store
    store.subscribe(() => {
        console.log("update:",store.getState());
        //update my Title dom element
        const tmpState = store.getState();
        titleElem.innerHTML = tmpState.title;
    });

    // listener 
    selectElem.addEventListener('change' , (event) => {
        //dispatch
        console.log('Value changed');

        actionTitle.newTitle = event.target.value;
        // console.log(actionTitle)
        store.dispatch(actionTitle);
    })
</script>
</html>
</script>